软件工程期末大作业报告
题目：饮水记录与健康提醒程序设计与实现
姓名：李家俊
学号：ZT25032302008
专业：软件工程
一、项目概述
1.1 项目背景
现代人工作学习压力大，常常忘记定时饮水，导致身体处于轻度脱水状态，影响健康。本项目开发一个简单实用的“饮水记录与健康提醒”程序，帮助用户养成良好饮水习惯，通过记录每日饮水量、定时提醒、健康小贴士等方式提升用户的健康意识。
1.2 项目目标

实现本地化饮水记录与统计功能
提供定时健康提醒与随机健康小贴士
界面美观、操作简便、完全离线运行
数据永久保存在浏览器本地（localStorage）

1.3 技术选型

前端：HTML5 + CSS3 + Vanilla JavaScript（无框架，轻量级）
存储：浏览器 localStorage（无需后端和数据库）
开发工具：Visual Studio Code
运行环境：任意现代浏览器（Chrome、Edge、Firefox 等）


二、需求分析
2.1 功能需求

饮水记录：支持150ml、250ml、500ml快速添加及自定义添加
数据展示：实时水杯动画、今日饮水量、完成百分比
统计功能：连续打卡天数、本周平均饮水量
健康提醒：每45分钟自动弹窗提醒 + 随机健康小贴士
设置功能：可自定义每日饮水目标（1000-5000ml）
辅助功能：查看近7天记录、长按重置当天记录

2.2 非功能需求

界面美观、响应式布局（适配手机与电脑）
数据本地持久化，关闭浏览器后不丢失
操作简单，无需注册登录
代码结构清晰、注释完整，便于维护


三、系统设计
3.1 整体架构
采用纯前端单页应用（SPA）架构，所有逻辑在浏览器端完成：

视图层：HTML + CSS（负责界面展示与动画）
逻辑层：JavaScript（负责数据处理、事件响应、定时提醒）
存储层：localStorage（持久化存储饮水记录与目标设置）

3.2 主要模块设计

饮水记录模块：addWater()、customAdd()
界面更新模块：updateAllDisplay()、水波动画
统计模块：updateStreak()、updateWeekAvg()
提醒模块：setInterval 定时器 + 随机健康贴士
设置与辅助模块：目标设置、历史记录、重置功能

3.3 数据结构

// 饮水记录
{
  "records": {
    "2025-12-14": 1750,
    "2025-12-13": 2100,
    ...
  },
  "lastRemind": 1736789123456
}

// 每日目标（单独存储）
"dailyGoal": "2000"

四、与大模型（Grok 4）的协作过程（详细记录）
在本项目开发过程中，我全程与 xAI 开发的 Grok 4 大语言模型进行了深度协作，整个过程高度高效、互动性强，极大提升了开发效率和代码质量。
4.1 协作初期（需求确认与方案选择）

我首先向 Grok 4 描述了作业要求：需要一个“饮水记录与健康提醒”程序。
Grok 4 提供了多种技术方案（Python Tkinter、Flutter、Web 等），并根据我使用 VSCode 的习惯，推荐了纯 Web（HTML+CSS+JS）方案，理由是“本地运行、零依赖、美观易改”。
我选择了“本地简易版”方向，Grok 4 立即提供了单文件 HTML 完整代码。

4.2 代码迭代阶段

首次生成：Grok 4 提供了一个单文件 HTML 版本，包含基本饮水记录、水波动画、localStorage 保存。
结构拆分：我要求拆分成 index.html、style.css、script.js 三个文件，并每行加注释 → Grok 4 立即生成带详细注释的三文件版本。
功能增强：
要求添加“重置当天记录” → Grok 4 实现了长按3秒防误触重置。
要求优化布局 → Grok 4 重新设计了卡片流布局，完美适配手机。

健康提醒功能：
我明确要求添加“健康提醒”功能，包括随机小贴士和定时弹窗。
Grok 4 新增了 HEALTH_TIPS 数组（13条专业贴士）、每45分钟提醒、提醒时自动显示随机贴士。

界面美化与细节优化：
多次要求优化布局、动画、颜色 → Grok 4 逐步升级为现代渐变背景、网格统计卡片、水波晃动效果。
添加了本周平均饮水量、设置目标弹窗、历史记录查看等高级功能。


4.3 协作特点

快速响应：每次需求变更，Grok 4 都能在几秒内提供完整可运行代码。
代码质量高：所有代码结构清晰、注释详细、逻辑严谨、无冗余。
用户体验导向：Grok 4 主动优化防误操作（如长按重置）、响应式设计、视觉效果。
全程指导：不仅生成代码，还解释实现原理，帮助我深入理解 localStorage、CSS 动画、定时器等知识点。

通过与 Grok 4 的协作，快速完成了一个功能完整、界面精美的项目，极大节约了时间，提升了作业质量。

五、实现与关键代码说明
5.1 水杯动画效果
使用 CSS 绝对定位 + transition 实现水位上升，配合波浪层动画，视觉效果生动。

5.2 定时提醒机制
setInterval(() => {
    if (document.hasFocus()) {
        // 显示健康贴士并询问是否喝水
        confirm("已经45分钟没喝水啦！\n\n" + tip + "\n\n现在喝一杯吗？")
    }
}, 45 * 60 * 1000);

5.3 数据持久化
使用 localStorage 存储所有记录，关闭浏览器后数据不丢失。

5.4 响应式设计
通过媒体查询（@media）和灵活布局（grid/flex），完美适配手机与电脑屏幕。

